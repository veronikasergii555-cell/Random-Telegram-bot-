<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ø—á–∞-–∏–≥—Ä–∞</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #f0f0f0;
    user-select: none;
    touch-action: none;
  }

  h2 {
    color: #2c3e50;
    margin: 20px 0;
  }

  .game-area {
    position: relative;
    width: 90%;
    max-width: 400px;
    height: 60vh;
    border: 2px solid #ccc;
    border-radius: 10px;
    background-color: #fff;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    padding: 10px;
  }

  .fruit {
    width: 20%;
    max-width: 70px;
    margin: 10px;
    text-align: center;
    font-size: 30px;
    cursor: grab;
    position: absolute;
    user-select: none;
  }

  .basket {
    width: 40%;
    height: 80px;
    border: 2px dashed #333;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    margin-top: auto;
    background-color: #fefefe;
    position: relative;
  }

  .message {
    font-size: 20px;
    color: green;
    margin-top: 15px;
  }
</style>
</head>
<body>

<h2>–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ—Ä—É–∫—Ç—ã –≤ —Å–≤–æ–∏ –∫–æ—Ä–∑–∏–Ω—ã</h2>

<div class="game-area" id="gameArea">
  <div class="fruit" data-type="üçé" style="top: 20px; left: 20px;">üçé</div>
  <div class="fruit" data-type="üçå" style="top: 20px; left: 120px;">üçå</div>
  <div class="fruit" data-type="üçá" style="top: 20px; left: 220px;">üçá</div>

  <div class="basket" data-type="üçé" style="bottom: 10px; left: 10px; position: absolute;">üçé –ö–æ—Ä–∑–∏–Ω–∞</div>
  <div class="basket" data-type="üçå" style="bottom: 10px; right: 10px; position: absolute;">üçå –ö–æ—Ä–∑–∏–Ω–∞</div>
</div>

<div class="message" id="message"></div>

<script>
  const fruits = document.querySelectorAll('.fruit');
  const baskets = document.querySelectorAll('.basket');
  const gameArea = document.getElementById('gameArea');
  const message = document.getElementById('message');

  let dragging = null;
  let offsetX = 0;
  let offsetY = 0;

  fruits.forEach(fruit => {
    fruit.addEventListener('touchstart', e => {
      dragging = fruit;
      const touch = e.touches[0];
      const rect = fruit.getBoundingClientRect();
      offsetX = touch.clientX - rect.left;
      offsetY = touch.clientY - rect.top;
    });

    fruit.addEventListener('touchmove', e => {
      if (!dragging) return;
      e.preventDefault();
      const touch = e.touches[0];
      const x = touch.clientX - offsetX - gameArea.getBoundingClientRect().left;
      const y = touch.clientY - offsetY - gameArea.getBoundingClientRect().top;
      dragging.style.left = `${x}px`;
      dragging.style.top = `${y}px`;
    });

    fruit.addEventListener('touchend', e => {
      if (!dragging) return;
      let placed = false;
      const fruitRect = dragging.getBoundingClientRect();

      baskets.forEach(basket => {
        const basketRect = basket.getBoundingClientRect();
        if (
          fruitRect.left + fruitRect.width/2 > basketRect.left &&
          fruitRect.left + fruitRect.width/2 < basketRect.right &&
          fruitRect.top + fruitRect.height/2 > basketRect.top &&
          fruitRect.top + fruitRect.height/2 < basketRect.bottom
        ) {
          // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞
          if (dragging.dataset.type === basket.dataset.type) {
            dragging.style.left = `${basket.offsetLeft + basket.offsetWidth/2 - dragging.offsetWidth/2}px`;
            dragging.style.top = `${basket.offsetTop - dragging.offsetHeight/2}px`;
            dragging.setAttribute('data-placed', 'true');
            placed = true;
          }
        }
      });

      if (!placed) {
        // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ
        dragging.style.top = dragging.dataset.originalTop;
        dragging.style.left = dragging.dataset.originalLeft;
      }

      dragging = null;

      // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
      checkWin();
    });

    // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
    fruit.dataset.originalTop = fruit.style.top;
    fruit.dataset.originalLeft = fruit.style.left;
  });

  function checkWin() {
    let allPlaced = true;
    fruits.forEach(fruit => {
      if (fruit.dataset.type !== fruit.dataset.placed) {
        if (fruit.dataset.placed !== "true") allPlaced = false;
      }
    });

    if (allPlaced) {
      message.textContent = "üéâ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!";
    }
  }
</script>

</body>
</html>

