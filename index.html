   <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ø—á–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 10px;
            overflow: hidden;
        }

        .game-container {
            width: 100%;
            max-width: 400px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }

        /* –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å - –∫–æ—Ä–∑–∏–Ω—ã */
        .baskets {
            height: 120px;
            background: #e3f2fd;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px;
            border-bottom: 2px solid #bbdefb;
        }

        .basket {
            width: 90px;
            height: 80px;
            background: white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 3px solid #bbdefb;
            position: relative;
        }

        .basket.highlight {
            border-color: #4CAF50;
            background: #f1f8e9;
        }

        .basket-icon {
            font-size: 32px;
            margin-bottom: 5px;
        }

        .basket-label {
            font-size: 12px;
            font-weight: bold;
            color: #333;
        }

        /* –ù–∏–∂–Ω—è—è —á–∞—Å—Ç—å - —Ñ—Ä—É–∫—Ç—ã */
        .fruits-area {
            height: 380px;
            position: relative;
            overflow: hidden;
        }

        .fruit {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            cursor: grab;
            z-index: 10;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .fruit:active {
            cursor: grabbing;
            transform: scale(1.1);
            z-index: 100;
        }

        .fruit.placed {
            cursor: default;
            opacity: 0.6;
            transform: scale(0.9);
        }

        .apple { background: #ffebee; }
        .banana { background: #fffde7; }
        .grapes { background: #f3e5f5; }
        .orange { background: #fff3e0; }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ */
        .message {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 14px;
            color: #666;
            padding: 5px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="baskets">
            <div class="basket" data-type="üçé" id="apple-basket">
                <div class="basket-icon">üçé</div>
                <div class="basket-label">–Ø–±–ª–æ–∫–∏</div>
            </div>
            <div class="basket" data-type="üçå" id="banana-basket">
                <div class="basket-icon">üçå</div>
                <div class="basket-label">–ë–∞–Ω–∞–Ω—ã</div>
            </div>
            <div class="basket" data-type="üçá" id="grapes-basket">
                <div class="basket-icon">üçá</div>
                <div class="basket-label">–í–∏–Ω–æ–≥—Ä–∞–¥</div>
            </div>
        </div>

        <div class="fruits-area" id="fruits-area">
            <!-- –§—Ä—É–∫—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
        </div>

        <div class="message" id="message">
            –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ—Ä—É–∫—Ç—ã –≤ –Ω—É–∂–Ω—ã–µ –∫–æ—Ä–∑–∏–Ω—ã
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const fruitsArea = document.getElementById('fruits-area');
            const message = document.getElementById('message');
            const baskets = document.querySelectorAll('.basket');
            
            // –°–æ–∑–¥–∞–µ–º —Ñ—Ä—É–∫—Ç—ã
            const fruits = [
                { type: 'üçé', class: 'apple', id: 'apple1', x: 50, y: 50 },
                { type: 'üçå', class: 'banana', id: 'banana1', x: 150, y: 50 },
                { type: 'üçá', class: 'grapes', id: 'grapes1', x: 250, y: 50 },
                { type: 'üçé', class: 'apple', id: 'apple2', x: 100, y: 150 },
                { type: 'üçå', class: 'banana', id: 'banana2', x: 200, y: 150 },
                { type: 'üçä', class: 'orange', id: 'orange1', x: 50, y: 250 }
            ];
            
            let draggedFruit = null;
            let placedCount = 0;
            const totalFruits = fruits.length;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ—Ä—É–∫—Ç—ã –Ω–∞ –ø–æ–ª–µ
            fruits.forEach(fruitData => {
                const fruit = document.createElement('div');
                fruit.className = `fruit ${fruitData.class}`;
                fruit.id = fruitData.id;
                fruit.dataset.type = fruitData.type;
                fruit.textContent = fruitData.type;
                fruit.style.left = `${fruitData.x}px`;
                fruit.style.top = `${fruitData.y}px`;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
                fruit.dataset.originalX = fruitData.x;
                fruit.dataset.originalY = fruitData.y;
                
                // –°–æ–±—ã—Ç–∏—è –¥–ª—è –º—ã—à–∏
                fruit.addEventListener('mousedown', startDrag);
                
                // –°–æ–±—ã—Ç–∏—è –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤
                fruit.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    startDrag(e);
                });
                
                fruitsArea.appendChild(fruit);
            });
            
            function startDrag(e) {
                const fruit = e.target;
                if (fruit.classList.contains('placed')) return;
                
                draggedFruit = fruit;
                const rect = fruit.getBoundingClientRect();
                
                // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –º—ã—à–∏
                let clientX, clientY;
                if (e.type === 'mousedown') {
                    clientX = e.clientX;
                    clientY = e.clientY;
                } else {
                    // –î–ª—è touch —Å–æ–±—ã—Ç–∏–π
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                }
                
                // –°–º–µ—â–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
                const offsetX = clientX - rect.left;
                const offsetY = clientY - rect.top;
                
                function moveAt(x, y) {
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∏–≥—Ä–æ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏
                    const areaRect = fruitsArea.getBoundingClientRect();
                    
                    let newX = x - offsetX - areaRect.left;
                    let newY = y - offsetY - areaRect.top;
                    
                    // –ì—Ä–∞–Ω–∏—Ü—ã –æ–±–ª–∞—Å—Ç–∏
                    const maxX = areaRect.width - 60;
                    const maxY = areaRect.height - 60;
                    
                    newX = Math.max(0, Math.min(newX, maxX));
                    newY = Math.max(0, Math.min(newY, maxY));
                    
                    fruit.style.left = `${newX}px`;
                    fruit.style.top = `${newY}px`;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –Ω–∞–¥ –∫–æ—Ä–∑–∏–Ω–æ–π
                    checkBasketOverlap(fruit);
                }
                
                function onMouseMove(e) {
                    if (!draggedFruit) return;
                    
                    if (e.type === 'mousemove') {
                        moveAt(e.clientX, e.clientY);
                    } else if (e.type === 'touchmove') {
                        e.preventDefault();
                        moveAt(e.touches[0].clientX, e.touches[0].clientY);
                    }
                }
                
                function onMouseUp() {
                    if (!draggedFruit) return;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                    checkDrop();
                    
                    // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                    document.removeEventListener('touchmove', onMouseMove);
                    document.removeEventListener('touchend', onMouseUp);
                    
                    draggedFruit = null;
                    
                    // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –≤—Å–µ—Ö –∫–æ—Ä–∑–∏–Ω
                    baskets.forEach(basket => basket.classList.remove('highlight'));
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
                document.addEventListener('touchmove', onMouseMove, { passive: false });
                document.addEventListener('touchend', onMouseUp);
            }
            
            function checkBasketOverlap(fruit) {
                if (!fruit) return;
                
                const fruitRect = fruit.getBoundingClientRect();
                const fruitCenterX = fruitRect.left + fruitRect.width / 2;
                const fruitCenterY = fruitRect.top + fruitRect.height / 2;
                
                // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–æ –≤—Å–µ—Ö –∫–æ—Ä–∑–∏–Ω
                baskets.forEach(basket => basket.classList.remove('highlight'));
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –∫–æ—Ä–∑–∏–Ω—É
                baskets.forEach(basket => {
                    const basketRect = basket.getBoundingClientRect();
                    
                    // –ï—Å–ª–∏ —Ü–µ–Ω—Ç—Ä —Ñ—Ä—É–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ—Ä–∑–∏–Ω—ã
                    if (
                        fruitCenterX > basketRect.left &&
                        fruitCenterX < basketRect.right &&
                        fruitCenterY > basketRect.top &&
                        fruitCenterY < basketRect.bottom
                    ) {
                        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º, –µ—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
                        if (fruit.dataset.type === basket.dataset.type) {
                            basket.classList.add('highlight');
                        }
                    }
                });
            }
            
            function checkDrop() {
                if (!draggedFruit) return;
                
                const fruitRect = draggedFruit.getBoundingClientRect();
                const fruitCenterX = fruitRect.left + fruitRect.width / 2;
                const fruitCenterY = fruitRect.top + fruitRect.height / 2;
                let placed = false;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –∫–æ—Ä–∑–∏–Ω—É
                baskets.forEach(basket => {
                    const basketRect = basket.getBoundingClientRect();
                    
                    // –ï—Å–ª–∏ —Ü–µ–Ω—Ç—Ä —Ñ—Ä—É–∫—Ç–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
                    if (
                        fruitCenterX > basketRect.left &&
                        fruitCenterX < basketRect.right &&
                        fruitCenterY > basketRect.top &&
                        fruitCenterY < basketRect.bottom
                    ) {
                        // –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
                        if (draggedFruit.dataset.type === basket.dataset.type) {
                            // –†–∞–∑–º–µ—â–∞–µ–º —Ñ—Ä—É–∫—Ç
                            placeFruitInBasket(draggedFruit, basket);
                            placed = true;
                        }
                    }
                });
                
                // –ï—Å–ª–∏ –Ω–µ —Ä–∞–∑–º–µ—Å—Ç–∏–ª–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –º–µ—Å—Ç–æ
                if (!placed && !draggedFruit.classList.contains('placed')) {
                    draggedFruit.style.left = `${draggedFruit.dataset.originalX}px`;
                    draggedFruit.style.top = `${draggedFruit.dataset.originalY}px`;
                }
            }
            
            function placeFruitInBasket(fruit, basket) {
                if (fruit.classList.contains('placed')) return;
                
                // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–π
                fruit.classList.add('placed');
                fruit.style.cursor = 'default';
                
                // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –Ω–∞–¥ –∫–æ—Ä–∑–∏–Ω–æ–π
                const basketRect = basket.getBoundingClientRect();
                const areaRect = fruitsArea.getBoundingClientRect();
                
                // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –Ω–∞–¥ –∫–æ—Ä–∑–∏–Ω–æ–π
                const x = basketRect.left - areaRect.left + (basketRect.width / 2) - 30;
                const y = basketRect.top - areaRect.top - 10;
                
                fruit.style.left = `${x}px`;
                fruit.style.top = `${y}px`;
                fruit.style.transition = 'all 0.3s ease';
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
                placedCount++;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                if (placedCount === totalFruits) {
                    message.textContent = '‚úÖ –ö–∞–ø—á–∞ –ø—Ä–æ–π–¥–µ–Ω–∞!';
                    message.style.color = '#4CAF50';
                    message.style.fontWeight = 'bold';
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram Mini App
                    setTimeout(() => {
                        if (window.Telegram && window.Telegram.WebApp) {
                            window.Telegram.WebApp.sendData(JSON.stringify({
                                captcha_passed: true
                            }));
                        }
                    }, 1000);
                } else {
                    message.textContent = `–†–∞–∑–º–µ—â–µ–Ω–æ: ${placedCount} –∏–∑ ${totalFruits}`;
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            message.textContent = `–†–∞–∑–º–µ—â–µ–Ω–æ: ${placedCount} –∏–∑ ${totalFruits}`;
        });
    </script>
</body>
</html>
